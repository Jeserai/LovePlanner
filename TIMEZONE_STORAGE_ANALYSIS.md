# 数据库时区存储问题分析

## 🚨 发现的问题

当前数据库表结构：
```sql
start_time time without time zone null,
end_time time without time zone null,
```

**问题**：
- `time without time zone` 只存储时间部分（如 "14:30:00"）
- **没有时区信息**，无法区分是UTC还是本地时间
- 现有数据的时区含义不明确

## 📊 数据格式对比

### 当前格式 ❌
```sql
start_time: "14:30:00"  -- 这是哪个时区的14:30？
end_time: "15:30:00"    -- UTC？本地时间？未知！
```

### 理想格式 ✅
有两种解决方案：

#### 方案A：改为 `timestamptz` (推荐)
```sql
start_datetime: "2025-09-02T14:30:00+00:00"  -- 明确的UTC时间
end_datetime: "2025-09-02T15:30:00+00:00"    -- 包含完整时区信息
```

#### 方案B：保持 `time` + 明确约定
```sql
start_time: "14:30:00"  -- 明确约定为UTC时间
end_time: "15:30:00"    -- 所有数据都按UTC存储
```

## 🤔 推荐解决方案

考虑到最小化改动和数据兼容性，建议采用 **方案B**：

1. **保持现有表结构**
2. **明确数据约定**：所有时间都按UTC存储
3. **代码层面确保一致性**
4. **逐步迁移现有数据**
